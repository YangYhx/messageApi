webpackJsonp([13],{Egvx:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e("Xxa5"),s=e.n(r),o=e("exGp"),n=e.n(o),i=e("Dd8w"),l=e.n(i),c=e("0jG4"),p={mixins:[e("9WlX").a],props:{modal:Object},watch:{"modal.show":{handler:function(){if(this.modal.show&&this.modal.row){this.modal.row.isAdmin=this.modal.row.isAdmin+"";var t=this.modal.row,a=t.category,e=t.press;return this.params=l()({},this.params,this.modal.row,{category:a?a._id:"",press:e?e._id:""})}this.modal.row=null},immediate:!0}},data:function(){return{params:this.initData(),categoryList:[],pressList:[],rules:{name:{type:"string",required:!0,message:"必填项"},category:{type:"string",required:!0,message:"必填项"},press:{type:"string",required:!0,message:"必填项"},author:{type:"string",required:!0,message:"必填项"},stock:{type:"number",required:!0,message:"必填项"}}}},created:function(){this.getCategoryAll(),this.getPressAll()},methods:{initData:function(){return{_id:void 0,name:"",category:"",press:"",author:"",stock:"",desc:"",borrowStatus:"0"}},modalOk:function(){var t=this;return n()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$refs.form.validate();case 2:if(a.sent){a.next=5;break}return a.abrupt("return");case 5:if(t.params._id){a.next=10;break}return a.next=8,t.create();case 8:a.next=12;break;case 10:return a.next=12,t.update();case 12:t.$Message.success("提交成功！"),t.initModal("ok");case 14:case"end":return a.stop()}},a,t)}))()},create:function(){var t=this;return n()(s.a.mark(function a(){var e;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.a.create(t.$QS.stringify(t.params));case 2:e=a.sent,e.data;case 4:case"end":return a.stop()}},a,t)}))()},update:function(){var t=this;return n()(s.a.mark(function a(){var e;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.a.update(t.$QS.stringify(t.params));case 2:e=a.sent,e.data;case 4:case"end":return a.stop()}},a,t)}))()},cancel:function(){this.initModal("cancel")},initModal:function(t){this.params=this.initData(),this.modal.show=!1,this.$refs.form.resetFields(),this.$emit(t)}}},u={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Modal",{attrs:{top:"5%",width:"500",title:this.params._id?"编辑":"新增"},on:{"on-ok":t.modalOk,"on-cancel":t.cancel},model:{value:t.modal.show,callback:function(a){t.$set(t.modal,"show",a)},expression:"modal.show"}},[e("div",{staticClass:"modal-form"},[e("Form",{ref:"form",attrs:{model:t.params,rules:t.rules,labelWidth:80}},[e("FormItem",{attrs:{label:"书名",prop:"name"}},[e("Input",{attrs:{placeholder:"请输入书名"},model:{value:t.params.name,callback:function(a){t.$set(t.params,"name",a)},expression:"params.name"}})],1),t._v(" "),e("FormItem",{attrs:{label:"类别",prop:"category"}},[e("Select",{attrs:{filterable:""},model:{value:t.params.category,callback:function(a){t.$set(t.params,"category",a)},expression:"params.category"}},t._l(t.categoryList,function(a){return e("Option",{key:a._id,attrs:{value:a._id}},[t._v(t._s(a.name))])}),1)],1),t._v(" "),e("FormItem",{attrs:{label:"出版社",prop:"press"}},[e("Select",{attrs:{filterable:""},model:{value:t.params.press,callback:function(a){t.$set(t.params,"press",a)},expression:"params.press"}},t._l(t.pressList,function(a){return e("Option",{key:a._id,attrs:{value:a._id}},[t._v(t._s(a.name))])}),1)],1),t._v(" "),e("FormItem",{attrs:{label:"作者",prop:"author"}},[e("Input",{attrs:{placeholder:"请输入作者"},model:{value:t.params.author,callback:function(a){t.$set(t.params,"author",a)},expression:"params.author"}})],1),t._v(" "),e("FormItem",{attrs:{label:"状态",prop:"borrowStatus"}},[e("RadioGroup",{model:{value:t.params.borrowStatus,callback:function(a){t.$set(t.params,"borrowStatus",a)},expression:"params.borrowStatus"}},[e("Radio",{attrs:{label:"0"}},[e("span",[t._v("未借出")])]),t._v(" "),e("Radio",{attrs:{label:"1"}},[e("span",[t._v("已借出")])])],1)],1),t._v(" "),e("FormItem",{attrs:{label:"简介",prop:"desc"}},[e("Input",{attrs:{type:"textarea",rows:6,placeholder:"简介"},model:{value:t.params.desc,callback:function(a){t.$set(t.params,"desc",a)},expression:"params.desc"}})],1)],1)],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"primary"},on:{click:t.modalOk}},[t._v("确定")]),t._v(" "),e("Button",{attrs:{type:"ghost"},on:{click:t.cancel}},[t._v("取消")])],1)])},staticRenderFns:[]};var m=e("VU/8")(p,u,!1,function(t){e("gMRK")},null,null);a.default=m.exports},gMRK:function(t,a){}});